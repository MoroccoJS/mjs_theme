"use strict";function _typeof(obj){return obj&&typeof Symbol!=="undefined"&&obj.constructor===Symbol?"symbol":typeof obj}(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++){s(r[o])}return s})({1:[function(require,module,exports){var riot=require("riot");var newsLetterController=require("./controllers/newsLetterController");var homeController=require("./controllers/homeController");var postController=require("./controllers/postController");var utilsMixin=require("./mixins/utilsMixin");var configMixin=require("./mixins/configMixin");var tags=require("./tags/all");var router=require("./router");riot.mount("navigation")},{"./controllers/homeController":2,"./controllers/newsLetterController":3,"./controllers/postController":4,"./mixins/configMixin":5,"./mixins/utilsMixin":6,"./router":7,"./tags/all":8,riot:11}],2:[function(require,module,exports){var riot=require("riot");var request=require("superagent");var homeController={fetchPosts:function fetchPosts(tag,last){var self=this;request.get(ghost.url.api("posts",{limit:8,filter:"tags:"+tag})).end(function(err,response){self[tag]=response.body.posts;if(last){self.update();document.querySelector("#main").style.opacity=1}})}};riot.mixin("homeController",homeController)},{riot:11,superagent:12}],3:[function(require,module,exports){var riot=require("riot");var request=require("superagent");var config=require("../mixins/configMixin");var resetButton=function resetButton(el){setTimeout(function(){el.disabled=false;el.classList.remove("error");el.classList.remove("success");el.value="Stay updated"},2500)};var errorButton=function errorButton(el,message){el.value=message;el.classList.add("error");el.disabled=true};var errorMessages={MEMBER_EXISTS_WITH_EMAIL_ADDRESS:"Already registered",EMAIL_NOT_VALID:"Invalid email"};var newsLetterController={addToMailList:function addToMailList(e){var self=this;if(self.email.value==""){errorButton(self.submitEmailButton,"Type something!");resetButton(self.submitEmailButton);return}self.submitEmailButton.value="Please wait...";self.submitEmailButton.disabled=true;request.post(config.api_url+"/api/newsletter/subscriptions").send({email:this.email.value}).end(function(err,res){if(res.body.ok){self.email.value="";self.submitEmailButton.value="Thank you!";self.submitEmailButton.classList.add("success")}else{errorButton(self.submitEmailButton,errorMessages[res.body.error])}resetButton(self.submitEmailButton)})}};riot.mixin("newsLetterController",newsLetterController)},{"../mixins/configMixin":5,riot:11,superagent:12}],4:[function(require,module,exports){(function(global){var riot=require("riot");var request=require("superagent");var loadDisqus=function loadDisqus(url,title,identifier){if(typeof DISQUS=="undefined"){global.disqus_config=function(){this.page.url=url;this.page.title=title;this.page.identifier=identifier};var d=document;var s=d.createElement("script");if(window.location.host=="moroccojs.org")s.src="//moroccojs.disqus.com/embed.js";else s.src="//moroccojs-dev.disqus.com/embed.js";(d.head||d.body).appendChild(s)}else{DISQUS.reset({reload:true,config:function config(){this.page.url=url;this.page.title=title;this.page.identifier=identifier}})}};var postController={fetchPost:function fetchPost(slug){var self=this;request.get(ghost.url.api("posts","slug",slug,{include:"tags, author"})).end(function(err,response){self.post=response.body.posts[0];document.title=self.post.title;self.postContent.innerHTML=self.post.html;hljs.initHighlighting.called=false;hljs.initHighlighting();loadDisqus(window.location.origin+"/"+self.post.slug,self.post.title,self.post.slug);self.update();document.querySelector("#main").style.opacity=1})}};riot.mixin("postController",postController)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{riot:11,superagent:12}],5:[function(require,module,exports){var riot=require("riot");var configMixin={api_url:"http://localhost:3000"};riot.mixin("configMixin",configMixin);module.exports=configMixin},{riot:11}],6:[function(require,module,exports){var riot=require("riot");var theaterJS=require("theaterjs");var utilsMixin={theaterJS:theaterJS};riot.mixin("utilsMixin",utilsMixin)},{riot:11,theaterjs:14}],7:[function(require,module,exports){var riot=require("riot");var tags=require("./tags/all");riot.route("/",function(){document.querySelector("#main").style.opacity=0;setTimeout(function(){riot.mount("#main","home")},300)});riot.route("/*",function(slug){document.querySelector("#main").style.opacity=0;setTimeout(function(){riot.mount("#main","post",{slug:slug})},300)});riot.route.base("/");riot.route.start(true)},{"./tags/all":8,riot:11}],8:[function(require,module,exports){(function(tagger){if(typeof define==="function"&&define.amd){define(function(require,exports,module){tagger(require("riot"),require,exports,module)})}else if(typeof module!=="undefined"&&typeof module.exports!=="undefined"){tagger(require("riot"),require,exports,module)}else{tagger(window.riot)}})(function(riot,require,exports,module){riot.tag2("home",'<jumbotron class="jumbotron"></jumbotron> <social-links class="social-links"></social-links> <div class="posts"> <div class="container"> <h2 class="posts-header">Events, articles, and tutorials from the community</h2> <section each="{tag in mainTags}" class="{tag}" show="{this[tag].length > 0}"> <h3 class="section-header"><span><a href="/tag/{tag}">Recent {tag}</a></span></h3> <div class="row"> <posts-list posts="{this[tag]}"></posts-list> </div> </section> </div> </div>',"","",function(opts){this.mixin("homeController");this.mainTags=["events","articles","tutorials"];this.events=null;this.articles=null;this.tutorials=null;var self=this;this.on("mount",function(){document.title="MoroccoJS - A Community of Moroccan JavaScript Developers";self.fetchPosts("events");self.fetchPosts("articles");self.fetchPosts("tutorials",true)})},"{ }");riot.tag2("jumbotron",'<div class="container"> <h1>A Community of Moroccan Developers<br> who live and breathe <span id="someone"></span></h1> <div class="call-to-action"> <form onsubmit="{addToMailList}"> <input type="email" name="email" placeholder="Email address..."> <input type="submit" name="submitEmailButton" value="Stay updated"> </form> <a class="join-link button button-primary" href="/join-moroccojs">Join us</a> </div> </div>',"","",function(opts){this.mixin("utilsMixin");this.mixin("newsLetterController");var self=this;this.on("mount",function(){var theater=self.theaterJS();theater.on("type:start, erase:start",function(){var actor=theater.getCurrentActor();actor.$element.classList.add("is-typing");actor.$element.classList.remove("is-waiting")}).on("type:end",function(){var actor=theater.getCurrentActor();actor.$element.classList.add("is-waiting");actor.$element.classList.remove("is-typing")});theater.addActor("someone",{speed:1,accuracy:1}).addScene("someone:Technology",3e3).addScene("someone:Node.js",1e3).addScene("someone:Express",1e3).addScene("someone:ReactJS",1e3).addScene("someone:VueJS",1e3).addScene("someone:EmberJS",1e3).addScene("someone:AngularJS",1e3).addScene("someone:RiotJS",1e3).addScene("someone:JavaScript",2e3).addScene(function(done){var actor=theater.getCurrentActor();actor.$element.classList.remove("is-typing");actor.$element.classList.remove("is-waiting")})})},"{ }");riot.tag2("navigation",'<ul> <li><a href="/tag/events">Events</a></li> <li><a href="/tag/articles">Articles</a></li> <li><a href="/tag/tutorials">Tutorials</a></li> <li><a href="https://forum.moroccojs.org">Forum</a></li> <li><a href="/host-moroccojs">Host us</a></li> <li><a href="/join-moroccojs">Join us</a></li> </ul>',"","",function(opts){});riot.tag2("posts-list",'<div each="{opts.posts}" class="post three columns"> <a href="{url}" class="post-image"> <img riot-src="{image}"> </a> <div class="post-info"> <h3 class="title"><a href="{url}">{title}</a></h3> </div> </div>',"","",function(opts){},"{ }");riot.tag2("sidebar",'<div class="sidebar-header"> <div class="author-info"> <a class="author-image" href="/author/{opts.author.slug}"><img riot-src="{opts.author.image}"></a> <h3 class="author-name"><a href="/author/{opts.author.slug}">{opts.author.name}</a></h3> <p class="author-bio">{opts.author.bio}</p> </div> </div>',"","",function(opts){},"{ }");riot.tag2("social-links","","","",function(opts){});riot.tag2("post",'<div class="mjs-container"> <div class="post-section"> <div class="post-meta"> <h1 class="post-title">{post.title}</h1> </div> <div class="post-content" name="postContent"></div> <div class="post-comments"> <div id="disqus_thread"></div> </div> </div> <sidebar class="sidebar" author="{post.author}"></sidebar> </div>',"","",function(opts){this.post=null;this.mixin("postController");var self=this;this.on("mount",function(){self.fetchPost(opts.slug)})},"{ }")})},{riot:11}],9:[function(require,module,exports){module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks[event]=this._callbacks[event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){var self=this;this._callbacks=this._callbacks||{};function on(){self.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks[event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks[event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],10:[function(require,module,exports){module.exports=function(arr,fn,initial){var idx=0;var len=arr.length;var curr=arguments.length==3?initial:arr[idx++];while(idx<len){curr=fn.call(null,curr,arr[idx],++idx,arr)}return curr}},{}],11:[function(require,module,exports){(function(window,undefined){"use strict";var riot={version:"v2.3.12",settings:{}},__uid=0,__virtualDom=[],__tagImpl={},RIOT_PREFIX="riot-",RIOT_TAG=RIOT_PREFIX+"tag",T_STRING="string",T_OBJECT="object",T_UNDEF="undefined",T_FUNCTION="function",SPECIAL_TAGS_REGEX=/^(?:opt(ion|group)|tbody|col|t[rhd])$/,RESERVED_WORDS_BLACKLIST=["_item","_id","_parent","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],IE_VERSION=(window&&window.document||{}).documentMode|0;riot.observable=function(el){el=el||{};var callbacks={},onEachEvent=function onEachEvent(e,fn){e.replace(/\S+/g,fn)},defineProperty=function defineProperty(key,value){Object.defineProperty(el,key,{value:value,enumerable:false,writable:false,configurable:false})};defineProperty("on",function(events,fn){if(typeof fn!="function")return el;onEachEvent(events,function(name,pos){(callbacks[name]=callbacks[name]||[]).push(fn);fn.typed=pos>0});return el});defineProperty("off",function(events,fn){if(events=="*")callbacks={};else{onEachEvent(events,function(name){if(fn){var arr=callbacks[name];for(var i=0,cb;cb=arr&&arr[i];++i){if(cb==fn)arr.splice(i--,1)}}else delete callbacks[name]})}return el});defineProperty("one",function(events,fn){function on(){el.off(events,on);fn.apply(el,arguments)}return el.on(events,on)});defineProperty("trigger",function(events){var arglen=arguments.length-1,args=new Array(arglen);for(var i=0;i<arglen;i++){args[i]=arguments[i+1]}onEachEvent(events,function(name){var fns=(callbacks[name]||[]).slice(0);for(var i=0,fn;fn=fns[i];++i){if(fn.busy)return;fn.busy=1;try{fn.apply(el,fn.typed?[name].concat(args):args)}catch(e){el.trigger("error",e)}if(fns[i]!==fn){i--}fn.busy=0}if(callbacks.all&&name!="all")el.trigger.apply(el,["all",name].concat(args))});return el});return el};(function(riot){if(!window)return;var RE_ORIGIN=/^.+?\/+[^\/]+/,EVENT_LISTENER="EventListener",REMOVE_EVENT_LISTENER="remove"+EVENT_LISTENER,ADD_EVENT_LISTENER="add"+EVENT_LISTENER,HAS_ATTRIBUTE="hasAttribute",REPLACE="replace",POPSTATE="popstate",HASHCHANGE="hashchange",TRIGGER="trigger",MAX_EMIT_STACK_LEVEL=3,win=window,doc=document,loc=win.history.location||win.location,prot=Router.prototype,clickEvent=doc&&doc.ontouchstart?"touchstart":"click",started=false,central=riot.observable(),routeFound=false,debouncedEmit,base,current,parser,secondParser,emitStack=[],emitStackLevel=0;function DEFAULT_PARSER(path){return path.split(/[\/?#]/)}function DEFAULT_SECOND_PARSER(path,filter){var re=new RegExp("^"+filter[REPLACE](/\*/g,"([^/?#]+?)")[REPLACE](/\.\./,".*")+"$"),args=path.match(re);if(args)return args.slice(1)}function debounce(fn,delay){var t;return function(){clearTimeout(t);t=setTimeout(fn,delay)}}function start(autoExec){debouncedEmit=debounce(emit,1);win[ADD_EVENT_LISTENER](POPSTATE,debouncedEmit);win[ADD_EVENT_LISTENER](HASHCHANGE,debouncedEmit);doc[ADD_EVENT_LISTENER](clickEvent,click);if(autoExec)emit(true)}function Router(){this.$=[];riot.observable(this);central.on("stop",this.s.bind(this));central.on("emit",this.e.bind(this))}function normalize(path){return path[REPLACE](/^\/|\/$/,"")}function isString(str){return typeof str=="string"}function getPathFromRoot(href){return(href||loc.href)[REPLACE](RE_ORIGIN,"")}function getPathFromBase(href){return base[0]=="#"?(href||loc.href).split(base)[1]||"":getPathFromRoot(href)[REPLACE](base,"")}function emit(force){var isRoot=emitStackLevel==0;if(MAX_EMIT_STACK_LEVEL<=emitStackLevel)return;emitStackLevel++;emitStack.push(function(){var path=getPathFromBase();if(force||path!=current){central[TRIGGER]("emit",path);current=path}});if(isRoot){while(emitStack.length){emitStack[0]();emitStack.shift()}emitStackLevel=0}}function click(e){if(e.which!=1||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)return;var el=e.target;while(el&&el.nodeName!="A"){el=el.parentNode}if(!el||el.nodeName!="A"||el[HAS_ATTRIBUTE]("download")||!el[HAS_ATTRIBUTE]("href")||el.target&&el.target!="_self"||el.href.indexOf(loc.href.match(RE_ORIGIN)[0])==-1)return;if(el.href!=loc.href){if(el.href.split("#")[0]==loc.href.split("#")[0]||base!="#"&&getPathFromRoot(el.href).indexOf(base)!==0||!go(getPathFromBase(el.href),el.title||doc.title))return}e.preventDefault()}function go(path,title){title=title||doc.title;history.pushState(null,title,base+normalize(path));doc.title=title;routeFound=false;emit();return routeFound}prot.m=function(first,second){if(isString(first)&&(!second||isString(second)))go(first,second);else if(second)this.r(first,second);else this.r("@",first)};prot.s=function(){this.off("*");this.$=[]};prot.e=function(path){this.$.concat("@").some(function(filter){var args=(filter=="@"?parser:secondParser)(normalize(path),normalize(filter));if(typeof args!="undefined"){this[TRIGGER].apply(null,[filter].concat(args));return routeFound=true}},this)};prot.r=function(filter,action){if(filter!="@"){filter="/"+normalize(filter);this.$.push(filter)}this.on(filter,action)};var mainRouter=new Router;var route=mainRouter.m.bind(mainRouter);route.create=function(){var newSubRouter=new Router;newSubRouter.m.stop=newSubRouter.s.bind(newSubRouter);return newSubRouter.m.bind(newSubRouter)};route.base=function(arg){base=arg||"#";current=getPathFromBase()};route.exec=function(){emit(true)};route.parser=function(fn,fn2){if(!fn&&!fn2){parser=DEFAULT_PARSER;secondParser=DEFAULT_SECOND_PARSER}if(fn)parser=fn;if(fn2)secondParser=fn2};route.query=function(){var q={};loc.href[REPLACE](/[?&](.+?)=([^&]*)/g,function(_,k,v){q[k]=v});return q};route.stop=function(){if(started){win[REMOVE_EVENT_LISTENER](POPSTATE,debouncedEmit);win[REMOVE_EVENT_LISTENER](HASHCHANGE,debouncedEmit);doc[REMOVE_EVENT_LISTENER](clickEvent,click);central[TRIGGER]("stop");started=false}};route.start=function(autoExec){if(!started){if(document.readyState=="complete")start(autoExec);else win[ADD_EVENT_LISTENER]("load",function(){setTimeout(function(){start(autoExec)},1)});started=true}};route.base();route.parser();riot.route=route})(riot);var brackets=function(UNDEF){var REGLOB="g",MLCOMMS=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,STRINGS=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,S_QBSRC=STRINGS.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,DEFAULT="{ }",FINDBRACES={"(":RegExp("([()])|"+S_QBSRC,REGLOB),"[":RegExp("([[\\]])|"+S_QBSRC,REGLOB),"{":RegExp("([{}])|"+S_QBSRC,REGLOB)};var cachedBrackets=UNDEF,_regex,_pairs=[];function _loopback(re){return re}function _rewrite(re,bp){if(!bp)bp=_pairs;return new RegExp(re.source.replace(/{/g,bp[2]).replace(/}/g,bp[3]),re.global?REGLOB:"")}function _create(pair){var cvt,arr=pair.split(" ");if(pair===DEFAULT){arr[2]=arr[0];arr[3]=arr[1];cvt=_loopback}else{if(arr.length!==2||/[\x00-\x1F<>a-zA-Z0-9'",;\\]/.test(pair)){throw new Error('Unsupported brackets "'+pair+'"')}arr=arr.concat(pair.replace(/(?=[[\]()*+?.^$|])/g,"\\").split(" "));cvt=_rewrite}arr[4]=cvt(arr[1].length>1?/{[\S\s]*?}/:/{[^}]*}/,arr);arr[5]=cvt(/\\({|})/g,arr);arr[6]=cvt(/(\\?)({)/g,arr);arr[7]=RegExp("(\\\\?)(?:([[({])|("+arr[3]+"))|"+S_QBSRC,REGLOB);arr[8]=pair;return arr}function _reset(pair){if(!pair)pair=DEFAULT;if(pair!==_pairs[8]){_pairs=_create(pair);_regex=pair===DEFAULT?_loopback:_rewrite;_pairs[9]=_regex(/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/);_pairs[10]=_regex(/(^|[^\\]){=[\S\s]*?}/);_brackets._rawOffset=_pairs[0].length}cachedBrackets=pair}function _brackets(reOrIdx){return reOrIdx instanceof RegExp?_regex(reOrIdx):_pairs[reOrIdx]}_brackets.split=function split(str,tmpl,_bp){if(!_bp)_bp=_pairs;var parts=[],match,isexpr,start,pos,re=_bp[6];isexpr=start=re.lastIndex=0;while(match=re.exec(str)){pos=match.index;if(isexpr){if(match[2]){re.lastIndex=skipBraces(match[2],re.lastIndex);continue}if(!match[3])continue}if(!match[1]){unescapeStr(str.slice(start,pos));start=re.lastIndex;re=_bp[6+(isexpr^=1)];re.lastIndex=start}}if(str&&start<str.length){unescapeStr(str.slice(start))}return parts;function unescapeStr(str){if(tmpl||isexpr)parts.push(str&&str.replace(_bp[5],"$1"));else parts.push(str)}function skipBraces(ch,pos){var match,recch=FINDBRACES[ch],level=1;recch.lastIndex=pos;while(match=recch.exec(str)){if(match[1]&&!(match[1]===ch?++level:--level))break}return match?recch.lastIndex:str.length}};_brackets.hasExpr=function hasExpr(str){return _brackets(4).test(str)};_brackets.loopKeys=function loopKeys(expr){var m=expr.match(_brackets(9));return m?{key:m[1],pos:m[2],val:_pairs[0]+m[3].trim()+_pairs[1]}:{val:expr.trim()}};_brackets.array=function array(pair){return _create(pair||cachedBrackets)};var _settings;function _setSettings(o){var b;o=o||{};b=o.brackets;Object.defineProperty(o,"brackets",{set:_reset,get:function get(){return cachedBrackets},enumerable:true});_settings=o;_reset(b)}Object.defineProperty(_brackets,"settings",{set:_setSettings,get:function get(){return _settings}});_brackets.settings=typeof riot!=="undefined"&&riot.settings||{};_brackets.set=_reset;_brackets.R_STRINGS=STRINGS;_brackets.R_MLCOMMS=MLCOMMS;_brackets.S_QBLOCKS=S_QBSRC;return _brackets}();var tmpl=function(){var _cache={};function _tmpl(str,data){if(!str)return str;return(_cache[str]||(_cache[str]=_create(str))).call(data,_logErr)}_tmpl.isRaw=function(expr){return expr[brackets._rawOffset]==="="};_tmpl.haveRaw=function(src){return brackets(10).test(src)};_tmpl.hasExpr=brackets.hasExpr;_tmpl.loopKeys=brackets.loopKeys;_tmpl.errorHandler=null;function _logErr(err,ctx){if(_tmpl.errorHandler){err.riotData={tagName:ctx&&ctx.root&&ctx.root.tagName,_riot_id:ctx&&ctx._riot_id};_tmpl.errorHandler(err)}}function _create(str){var expr=_getTmpl(str);if(expr.slice(0,11)!=="try{return ")expr="return "+expr;return new Function("E",expr+";")}var RE_QBLOCK=RegExp(brackets.S_QBLOCKS,"g"),RE_QBMARK=/\x01(\d+)~/g;function _getTmpl(str){var qstr=[],expr,parts=brackets.split(str.replace(/\u2057/g,'"'),1);if(parts.length>2||parts[0]){var i,j,list=[];for(i=j=0;i<parts.length;++i){expr=parts[i];if(expr&&(expr=i&1?_parseExpr(expr,1,qstr):'"'+expr.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"'))list[j++]=expr}expr=j<2?list[0]:"["+list.join(",")+'].join("")'}else{expr=_parseExpr(parts[1],0,qstr)}if(qstr[0])expr=expr.replace(RE_QBMARK,function(_,pos){return qstr[pos].replace(/\r/g,"\\r").replace(/\n/g,"\\n")});return expr}var CS_IDENT=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\x01(\d+)~):/,RE_BRACE=/,|([[{(])|$/g;function _parseExpr(expr,asText,qstr){if(expr[0]==="=")expr=expr.slice(1);expr=expr.replace(RE_QBLOCK,function(s,div){return s.length>2&&!div?""+(qstr.push(s)-1)+"~":s}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1");if(expr){var list=[],cnt=0,match;while(expr&&(match=expr.match(CS_IDENT))&&!match.index){var key,jsb,re=/,|([[{(])|$/g;expr=RegExp.rightContext;key=match[2]?qstr[match[2]].slice(1,-1).trim().replace(/\s+/g," "):match[1];while(jsb=(match=re.exec(expr))[1]){skipBraces(jsb,re)}jsb=expr.slice(0,match.index);expr=RegExp.rightContext;list[cnt++]=_wrapExpr(jsb,1,key)}expr=!cnt?_wrapExpr(expr,asText):cnt>1?"["+list.join(",")+'].join(" ").trim()':list[0]}return expr;function skipBraces(jsb,re){var match,lv=1,ir=jsb==="("?/[()]/g:jsb==="["?/[[\]]/g:/[{}]/g;ir.lastIndex=re.lastIndex;while(match=ir.exec(expr)){if(match[0]===jsb)++lv;else if(!--lv)break}re.lastIndex=lv?expr.length:ir.lastIndex}}var JS_CONTEXT='"in this?this:'+((typeof window==="undefined"?"undefined":_typeof(window))!=="object"?"global":"window")+").";var JS_VARNAME=/[,{][$\w]+:|(^ *|[^$\w\.])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g;function _wrapExpr(expr,asText,key){var tb;expr=expr.replace(JS_VARNAME,function(match,p,mvar,pos,s){if(mvar){pos=tb?0:pos+match.length;if(mvar!=="this"&&mvar!=="global"&&mvar!=="window"){match=p+'("'+mvar+JS_CONTEXT+mvar;if(pos)tb=(s=s[pos])==="."||s==="("||s==="["}else if(pos)tb=!/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/.test(s.slice(pos))}return match});if(tb){expr="try{return "+expr+"}catch(e){E(e,this)}"}if(key){expr=(tb?"function(){"+expr+"}.call(this)":"("+expr+")")+'?"'+key+'":""'}else if(asText){expr="function(v){"+(tb?expr.replace("return ","v="):"v=("+expr+")")+';return v||v===0?v:""}.call(this)'}return expr}_tmpl.parse=function(s){return s};return _tmpl}();tmpl.version=brackets.version="v2.3.19";var mkdom=function(checkIE){var rootEls={tr:"tbody",th:"tr",td:"tr",tbody:"table",col:"colgroup"},GENERIC="div";checkIE=checkIE&&checkIE<10;function _mkdom(html){var match=html&&html.match(/^\s*<([-\w]+)/),tagName=match&&match[1].toLowerCase(),rootTag=rootEls[tagName]||GENERIC,el=mkEl(rootTag);el.stub=true;if(checkIE&&tagName&&(match=tagName.match(SPECIAL_TAGS_REGEX)))ie9elem(el,html,tagName,!!match[1]);else el.innerHTML=html;return el}function ie9elem(el,html,tagName,select){var div=mkEl(GENERIC),tag=select?"select>":"table>",child;div.innerHTML="<"+tag+html+"</"+tag;child=$(tagName,div);if(child)el.appendChild(child)}return _mkdom}(IE_VERSION);function mkitem(expr,key,val){var item={};item[expr.key]=key;if(expr.pos)item[expr.pos]=val;return item}function unmountRedundant(items,tags){var i=tags.length,j=items.length;while(i>j){var t=tags[--i];tags.splice(i,1);t.unmount()}}function moveNestedTags(child,i){Object.keys(child.tags).forEach(function(tagName){var tag=child.tags[tagName];if(isArray(tag))each(tag,function(t){moveChildTag(t,tagName,i)});else moveChildTag(tag,tagName,i)})}function addVirtual(tag,src,target){var el=tag._root;tag._virts=[];while(el){var sib=el.nextSibling;if(target)src.insertBefore(el,target._root);else src.appendChild(el);tag._virts.push(el);el=sib}}function moveVirtual(tag,src,target,len){var el=tag._root;for(var i=0;i<len;i++){var sib=el.nextSibling;src.insertBefore(el,target._root);el=sib}}function _each(dom,parent,expr){remAttr(dom,"each");var mustReorder=_typeof(getAttr(dom,"no-reorder"))!==T_STRING||remAttr(dom,"no-reorder"),tagName=getTagName(dom),impl=__tagImpl[tagName]||{tmpl:dom.outerHTML},useRoot=SPECIAL_TAGS_REGEX.test(tagName),root=dom.parentNode,ref=document.createTextNode(""),child=getTag(dom),isOption=/option/gi.test(tagName),tags=[],oldItems=[],hasKeys,isVirtual=dom.tagName=="VIRTUAL";expr=tmpl.loopKeys(expr);root.insertBefore(ref,dom);parent.one("before-mount",function(){dom.parentNode.removeChild(dom);if(root.stub)root=parent.root}).on("update",function(){var items=tmpl(expr.val,parent),frag=document.createDocumentFragment();if(!isArray(items)){hasKeys=items||false;items=hasKeys?Object.keys(items).map(function(key){return mkitem(expr,key,items[key])}):[]}items.forEach(function(item,i){var _mustReorder=mustReorder&&item instanceof Object,oldPos=oldItems.indexOf(item),pos=~oldPos&&_mustReorder?oldPos:i,tag=tags[pos];item=!hasKeys&&expr.key?mkitem(expr,item,i):item;if(!_mustReorder&&!tag||_mustReorder&&!~oldPos||!tag){tag=new Tag(impl,{parent:parent,isLoop:true,hasImpl:!!__tagImpl[tagName],root:useRoot?root:dom.cloneNode(),item:item},dom.innerHTML);tag.mount();if(isVirtual)tag._root=tag.root.firstChild;if(i==tags.length){if(isVirtual)addVirtual(tag,frag);else frag.appendChild(tag.root)}else{if(isVirtual)addVirtual(tag,root,tags[i]);else root.insertBefore(tag.root,tags[i].root);oldItems.splice(i,0,item)}tags.splice(i,0,tag);pos=i}else tag.update(item);if(pos!==i&&_mustReorder){if(isVirtual)moveVirtual(tag,root,tags[i],dom.childNodes.length);else root.insertBefore(tag.root,tags[i].root);if(expr.pos)tag[expr.pos]=i;tags.splice(i,0,tags.splice(pos,1)[0]);oldItems.splice(i,0,oldItems.splice(pos,1)[0]);if(!child)moveNestedTags(tag,i)}tag._item=item;defineProperty(tag,"_parent",parent)},true);unmountRedundant(items,tags);if(isOption)root.appendChild(frag);else root.insertBefore(frag,ref);if(child)parent.tags[tagName]=tags;oldItems=items.slice()})}function parseNamedElements(root,tag,childTags,forceParsingNamed){walk(root,function(dom){if(dom.nodeType==1){dom.isLoop=dom.isLoop||dom.parentNode&&dom.parentNode.isLoop||getAttr(dom,"each")?1:0;if(childTags){var child=getTag(dom);if(child&&!dom.isLoop)childTags.push(initChildTag(child,{root:dom,parent:tag},dom.innerHTML,tag))}if(!dom.isLoop||forceParsingNamed)setNamed(dom,tag,[])}})}function parseExpressions(root,tag,expressions){function addExpr(dom,val,extra){if(tmpl.hasExpr(val)){var expr={dom:dom,expr:val};expressions.push(extend(expr,extra))}}walk(root,function(dom){var type=dom.nodeType;if(type==3&&dom.parentNode.tagName!="STYLE")addExpr(dom,dom.nodeValue);if(type!=1)return;var attr=getAttr(dom,"each");if(attr){_each(dom,tag,attr);return false}each(dom.attributes,function(attr){var name=attr.name,bool=name.split("__")[1];addExpr(dom,attr.value,{attr:bool||name,bool:bool});if(bool){remAttr(dom,name);return false}});if(getTag(dom))return false})}function Tag(impl,conf,innerHTML){var self=riot.observable(this),opts=inherit(conf.opts)||{},dom=mkdom(impl.tmpl),parent=conf.parent,isLoop=conf.isLoop,hasImpl=conf.hasImpl,item=cleanUpData(conf.item),expressions=[],childTags=[],root=conf.root,fn=impl.fn,tagName=root.tagName.toLowerCase(),attr={},propsInSyncWithParent=[];if(fn&&root._tag)root._tag.unmount(true);this.isMounted=false;root.isLoop=isLoop;root._tag=this;defineProperty(this,"_riot_id",++__uid);extend(this,{parent:parent,root:root,opts:opts,tags:{}},item);each(root.attributes,function(el){var val=el.value;if(tmpl.hasExpr(val))attr[el.name]=val});if(dom.innerHTML&&!/^(select|optgroup|table|tbody|tr|col(?:group)?)$/.test(tagName))dom.innerHTML=replaceYield(dom.innerHTML,innerHTML);function updateOpts(){var ctx=hasImpl&&isLoop?self:parent||self;each(root.attributes,function(el){opts[toCamel(el.name)]=tmpl(el.value,ctx)});each(Object.keys(attr),function(name){opts[toCamel(name)]=tmpl(attr[name],ctx)})}function normalizeData(data){for(var key in item){if(_typeof(self[key])!==T_UNDEF&&isWritable(self,key))self[key]=data[key]}}function inheritFromParent(){if(!self.parent||!isLoop)return;each(Object.keys(self.parent),function(k){var mustSync=!contains(RESERVED_WORDS_BLACKLIST,k)&&contains(propsInSyncWithParent,k);if(_typeof(self[k])===T_UNDEF||mustSync){if(!mustSync)propsInSyncWithParent.push(k);self[k]=self.parent[k]}})}defineProperty(this,"update",function(data){data=cleanUpData(data);inheritFromParent();if(data&&(typeof item==="undefined"?"undefined":_typeof(item))===T_OBJECT){normalizeData(data);item=data}extend(self,data);updateOpts();self.trigger("update",data);update(expressions,self);rAF(function(){self.trigger("updated")});return this});defineProperty(this,"mixin",function(){each(arguments,function(mix){var instance;mix=(typeof mix==="undefined"?"undefined":_typeof(mix))===T_STRING?riot.mixin(mix):mix;if(isFunction(mix)){instance=new mix;mix=mix.prototype}else instance=mix;each(Object.getOwnPropertyNames(mix),function(key){if(key!="init")self[key]=isFunction(instance[key])?instance[key].bind(self):instance[key]});if(instance.init)instance.init.bind(self)()});return this});defineProperty(this,"mount",function(){updateOpts();if(fn)fn.call(self,opts);parseExpressions(dom,self,expressions);toggle(true);if(impl.attrs||hasImpl){walkAttributes(impl.attrs,function(k,v){setAttr(root,k,v)});parseExpressions(self.root,self,expressions)}if(!self.parent||isLoop)self.update(item);self.trigger("before-mount");if(isLoop&&!hasImpl){self.root=root=dom.firstChild}else{while(dom.firstChild){root.appendChild(dom.firstChild)}if(root.stub)self.root=root=parent.root}if(isLoop)parseNamedElements(self.root,self.parent,null,true);if(!self.parent||self.parent.isMounted){self.isMounted=true;self.trigger("mount")}else self.parent.one("mount",function(){if(!isInStub(self.root)){self.parent.isMounted=self.isMounted=true;self.trigger("mount")}})});defineProperty(this,"unmount",function(keepRootTag){var el=root,p=el.parentNode,ptag;self.trigger("before-unmount");__virtualDom.splice(__virtualDom.indexOf(self),1);if(this._virts){each(this._virts,function(v){v.parentNode.removeChild(v)})}if(p){if(parent){ptag=getImmediateCustomParentTag(parent);if(isArray(ptag.tags[tagName]))each(ptag.tags[tagName],function(tag,i){if(tag._riot_id==self._riot_id)ptag.tags[tagName].splice(i,1)});else ptag.tags[tagName]=undefined}else while(el.firstChild){el.removeChild(el.firstChild)}if(!keepRootTag)p.removeChild(el);else remAttr(p,"riot-tag")}self.trigger("unmount");toggle();self.off("*");self.isMounted=false;root._tag=null});function toggle(isMount){each(childTags,function(child){child[isMount?"mount":"unmount"]()});if(parent){var evt=isMount?"on":"off";if(isLoop)parent[evt]("unmount",self.unmount);else parent[evt]("update",self.update)[evt]("unmount",self.unmount)}}parseNamedElements(dom,this,childTags)}function setEventHandler(name,handler,dom,tag){dom[name]=function(e){var ptag=tag._parent,item=tag._item,el;if(!item)while(ptag&&!item){item=ptag._item;ptag=ptag._parent}e=e||window.event;if(isWritable(e,"currentTarget"))e.currentTarget=dom;
if(isWritable(e,"target"))e.target=e.srcElement;if(isWritable(e,"which"))e.which=e.charCode||e.keyCode;e.item=item;if(handler.call(tag,e)!==true&&!/radio|check/.test(dom.type)){if(e.preventDefault)e.preventDefault();e.returnValue=false}if(!e.preventUpdate){el=item?getImmediateCustomParentTag(ptag):tag;el.update()}}}function insertTo(root,node,before){if(root){root.insertBefore(before,node);root.removeChild(node)}}function update(expressions,tag){each(expressions,function(expr,i){var dom=expr.dom,attrName=expr.attr,value=tmpl(expr.expr,tag),parent=expr.dom.parentNode;if(expr.bool)value=value?attrName:false;else if(value==null)value="";if(parent&&parent.tagName=="TEXTAREA"){value=(""+value).replace(/riot-/g,"");parent.value=value}if(expr.value===value)return;expr.value=value;if(!attrName){dom.nodeValue=""+value;return}remAttr(dom,attrName);if(isFunction(value)){setEventHandler(attrName,value,dom,tag)}else if(attrName=="if"){var stub=expr.stub,add=function add(){insertTo(stub.parentNode,stub,dom)},remove=function remove(){insertTo(dom.parentNode,dom,stub)};if(value){if(stub){add();dom.inStub=false;if(!isInStub(dom)){walk(dom,function(el){if(el._tag&&!el._tag.isMounted)el._tag.isMounted=!!el._tag.trigger("mount")})}}}else{stub=expr.stub=stub||document.createTextNode("");if(dom.parentNode)remove();else(tag.parent||tag).one("updated",remove);dom.inStub=true}}else if(/^(show|hide)$/.test(attrName)){if(attrName=="hide")value=!value;dom.style.display=value?"":"none"}else if(attrName=="value"){dom.value=value}else if(startsWith(attrName,RIOT_PREFIX)&&attrName!=RIOT_TAG){if(value)setAttr(dom,attrName.slice(RIOT_PREFIX.length),value)}else{if(expr.bool){dom[attrName]=value;if(!value)return}if(value&&value!=0&&(typeof value==="undefined"?"undefined":_typeof(value))!==T_OBJECT)setAttr(dom,attrName,value)}})}function each(els,fn){for(var i=0,len=(els||[]).length,el;i<len;i++){el=els[i];if(el!=null&&fn(el,i)===false)i--}return els}function isFunction(v){return(typeof v==="undefined"?"undefined":_typeof(v))===T_FUNCTION||false}function remAttr(dom,name){dom.removeAttribute(name)}function toCamel(string){return string.replace(/-(\w)/g,function(_,c){return c.toUpperCase()})}function getAttr(dom,name){return dom.getAttribute(name)}function setAttr(dom,name,val){dom.setAttribute(name,val)}function getTag(dom){return dom.tagName&&__tagImpl[getAttr(dom,RIOT_TAG)||dom.tagName.toLowerCase()]}function addChildTag(tag,tagName,parent){var cachedTag=parent.tags[tagName];if(cachedTag){if(!isArray(cachedTag))if(cachedTag!==tag)parent.tags[tagName]=[cachedTag];if(!contains(parent.tags[tagName],tag))parent.tags[tagName].push(tag)}else{parent.tags[tagName]=tag}}function moveChildTag(tag,tagName,newPos){var parent=tag.parent,tags;if(!parent)return;tags=parent.tags[tagName];if(isArray(tags))tags.splice(newPos,0,tags.splice(tags.indexOf(tag),1)[0]);else addChildTag(tag,tagName,parent)}function initChildTag(child,opts,innerHTML,parent){var tag=new Tag(child,opts,innerHTML),tagName=getTagName(opts.root),ptag=getImmediateCustomParentTag(parent);tag.parent=ptag;tag._parent=parent;addChildTag(tag,tagName,ptag);if(ptag!==parent)addChildTag(tag,tagName,parent);opts.root.innerHTML="";return tag}function getImmediateCustomParentTag(tag){var ptag=tag;while(!getTag(ptag.root)){if(!ptag.parent)break;ptag=ptag.parent}return ptag}function defineProperty(el,key,value,options){Object.defineProperty(el,key,extend({value:value,enumerable:false,writable:false,configurable:false},options));return el}function getTagName(dom){var child=getTag(dom),namedTag=getAttr(dom,"name"),tagName=namedTag&&!tmpl.hasExpr(namedTag)?namedTag:child?child.name:dom.tagName.toLowerCase();return tagName}function extend(src){var obj,args=arguments;for(var i=1;i<args.length;++i){if(obj=args[i]){for(var key in obj){if(isWritable(src,key))src[key]=obj[key]}}}return src}function contains(arr,item){return~arr.indexOf(item)}function isArray(a){return Array.isArray(a)||a instanceof Array}function isWritable(obj,key){var props=Object.getOwnPropertyDescriptor(obj,key);return _typeof(obj[key])===T_UNDEF||props&&props.writable}function cleanUpData(data){if(!(data instanceof Tag)&&!(data&&_typeof(data.trigger)==T_FUNCTION))return data;var o={};for(var key in data){if(!contains(RESERVED_WORDS_BLACKLIST,key))o[key]=data[key]}return o}function walk(dom,fn){if(dom){if(fn(dom)===false)return;else{dom=dom.firstChild;while(dom){walk(dom,fn);dom=dom.nextSibling}}}}function walkAttributes(html,fn){var m,re=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;while(m=re.exec(html)){fn(m[1].toLowerCase(),m[2]||m[3]||m[4])}}function isInStub(dom){while(dom){if(dom.inStub)return true;dom=dom.parentNode}return false}function mkEl(name){return document.createElement(name)}function mkElWithInnerHTML(name,innerHTML){var el=mkEl(name);el.innerHTML=innerHTML||"";return el}function replaceYield(tmpl,innerHTML){var tmplElement=mkElWithInnerHTML("div",tmpl);if(tmplElement.querySelector&&tmplElement.querySelector("yield[from]")){each(mkElWithInnerHTML("div",innerHTML).childNodes,function(toYield){if(toYield.nodeType==1&&toYield.tagName=="YIELD"&&toYield.getAttribute("to")){each($$('yield[from="'+toYield.getAttribute("to")+'"]',tmplElement),function(fromYield){fromYield.outerHTML=toYield.innerHTML})}});return tmplElement.innerHTML}else return tmpl.replace(/<yield\s*(?:\/>|>\s*<\/yield\s*>)/gi,innerHTML||"")}function $$(selector,ctx){return(ctx||document).querySelectorAll(selector)}function $(selector,ctx){return(ctx||document).querySelector(selector)}function inherit(parent){function Child(){}Child.prototype=parent;return new Child}function getNamedKey(dom){return getAttr(dom,"id")||getAttr(dom,"name")}function setNamed(dom,parent,keys){var key=getNamedKey(dom),add=function add(value){if(contains(keys,key))return;var isArr=isArray(value);if(!value)parent[key]=dom;else if(!isArr||isArr&&!contains(value,dom)){if(isArr)value.push(dom);else parent[key]=[value,dom]}};if(!key)return;if(tmpl.hasExpr(key))parent.one("updated",function(){key=getNamedKey(dom);add(parent[key])});else add(parent[key])}function startsWith(src,str){return src.slice(0,str.length)===str}var injectStyle=function(){if(!window)return;var styleNode=mkEl("style"),placeholder=$("style[type=riot]");setAttr(styleNode,"type","text/css");if(placeholder){placeholder.parentNode.replaceChild(styleNode,placeholder);placeholder=null}else document.getElementsByTagName("head")[0].appendChild(styleNode);return styleNode.styleSheet?function(css){styleNode.styleSheet.cssText+=css}:function(css){styleNode.innerHTML+=css}}();var rAF=function(w){return w.requestAnimationFrame||w.webkitRequestAnimationFrame||w.mozRequestAnimationFrame||function(cb){setTimeout(cb,1e3/60)}}(window||{});function mountTo(root,tagName,opts){var tag=__tagImpl[tagName],innerHTML=root._innerHTML=root._innerHTML||root.innerHTML;root.innerHTML="";if(tag&&root)tag=new Tag(tag,{root:root,opts:opts},innerHTML);if(tag&&tag.mount){tag.mount();if(!contains(__virtualDom,tag))__virtualDom.push(tag)}return tag}riot.util={brackets:brackets,tmpl:tmpl};riot.mixin=function(){var mixins={};return function(name,mixin){if(!mixin)return mixins[name];mixins[name]=mixin}}();riot.tag=function(name,html,css,attrs,fn){if(isFunction(attrs)){fn=attrs;if(/^[\w\-]+\s?=/.test(css)){attrs=css;css=""}else attrs=""}if(css){if(isFunction(css))fn=css;else if(injectStyle)injectStyle(css)}__tagImpl[name]={name:name,tmpl:html,attrs:attrs,fn:fn};return name};riot.tag2=function(name,html,css,attrs,fn,bpair){if(css&&injectStyle)injectStyle(css);__tagImpl[name]={name:name,tmpl:html,attrs:attrs,fn:fn};return name};riot.mount=function(selector,tagName,opts){var els,allTags,tags=[];function addRiotTags(arr){var list="";each(arr,function(e){list+=", *["+RIOT_TAG+'="'+e.trim()+'"]'});return list}function selectAllTags(){var keys=Object.keys(__tagImpl);return keys+addRiotTags(keys)}function pushTags(root){var last;if(root.tagName){if(tagName&&(!(last=getAttr(root,RIOT_TAG))||last!=tagName))setAttr(root,RIOT_TAG,tagName);var tag=mountTo(root,tagName||root.getAttribute(RIOT_TAG)||root.tagName.toLowerCase(),opts);if(tag)tags.push(tag)}else if(root.length)each(root,pushTags)}if((typeof tagName==="undefined"?"undefined":_typeof(tagName))===T_OBJECT){opts=tagName;tagName=0}if((typeof selector==="undefined"?"undefined":_typeof(selector))===T_STRING){if(selector==="*")selector=allTags=selectAllTags();else selector+=addRiotTags(selector.split(","));els=selector?$$(selector):[]}else els=selector;if(tagName==="*"){tagName=allTags||selectAllTags();if(els.tagName)els=$$(tagName,els);else{var nodeList=[];each(els,function(_el){nodeList.push($$(tagName,_el))});els=nodeList}tagName=0}if(els.tagName)pushTags(els);else each(els,pushTags);return tags};riot.update=function(){return each(__virtualDom,function(tag){tag.update()})};riot.Tag=Tag;if((typeof exports==="undefined"?"undefined":_typeof(exports))===T_OBJECT)module.exports=riot;else if((typeof define==="undefined"?"undefined":_typeof(define))===T_FUNCTION&&_typeof(define.amd)!==T_UNDEF)define(function(){return window.riot=riot});else window.riot=riot})(typeof window!="undefined"?window:void 0)},{}],12:[function(require,module,exports){var Emitter=require("emitter");var reduce=require("reduce");var root;if(typeof window!=="undefined"){root=window}else if(typeof self!=="undefined"){root=self}else{root=this}function noop(){}function isHost(obj){var str={}.toString.call(obj);switch(str){case"[object File]":case"[object Blob]":case"[object FormData]":return true;default:return false}}request.getXHR=function(){if(root.XMLHttpRequest&&(!root.location||"file:"!=root.location.protocol||!root.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}}return false};var trim="".trim?function(s){return s.trim()}:function(s){return s.replace(/(^\s*|\s*$)/g,"")};function isObject(obj){return obj===Object(obj)}function serialize(obj){if(!isObject(obj))return obj;var pairs=[];for(var key in obj){if(null!=obj[key]){pushEncodedKeyValuePair(pairs,key,obj[key])}}return pairs.join("&")}function pushEncodedKeyValuePair(pairs,key,val){if(Array.isArray(val)){return val.forEach(function(v){pushEncodedKeyValuePair(pairs,key,v)})}pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(val))}request.serializeObject=serialize;function parseString(str){var obj={};var pairs=str.split("&");var parts;var pair;for(var i=0,len=pairs.length;i<len;++i){pair=pairs[i];parts=pair.split("=");obj[decodeURIComponent(parts[0])]=decodeURIComponent(parts[1])}return obj}request.parseString=parseString;request.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify};request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse};function parseHeader(str){var lines=str.split(/\r?\n/);var fields={};var index;var line;var field;var val;lines.pop();for(var i=0,len=lines.length;i<len;++i){line=lines[i];index=line.indexOf(":");field=line.slice(0,index).toLowerCase();val=trim(line.slice(index+1));fields[field]=val}return fields}function type(str){return str.split(/ *; */).shift()}function params(str){return reduce(str.split(/ *; */),function(obj,str){var parts=str.split(/ *= */),key=parts.shift(),val=parts.shift();if(key&&val)obj[key]=val;return obj},{})}function Response(req,options){options=options||{};this.req=req;this.xhr=this.req.xhr;this.text=this.req.method!="HEAD"&&(this.xhr.responseType===""||this.xhr.responseType==="text")||typeof this.xhr.responseType==="undefined"?this.xhr.responseText:null;this.statusText=this.req.xhr.statusText;this.setStatusProperties(this.xhr.status);this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders());this.header["content-type"]=this.xhr.getResponseHeader("content-type");this.setHeaderProperties(this.header);this.body=this.req.method!="HEAD"?this.parseBody(this.text?this.text:this.xhr.response):null}Response.prototype.get=function(field){return this.header[field.toLowerCase()]};Response.prototype.setHeaderProperties=function(header){var ct=this.header["content-type"]||"";this.type=type(ct);var obj=params(ct);for(var key in obj){this[key]=obj[key]}};Response.prototype.parseBody=function(str){var parse=request.parse[this.type];return parse&&str&&(str.length||str instanceof Object)?parse(str):null};Response.prototype.setStatusProperties=function(status){if(status===1223){status=204}var type=status/100|0;this.status=this.statusCode=status;this.statusType=type;this.info=1==type;this.ok=2==type;this.clientError=4==type;this.serverError=5==type;this.error=4==type||5==type?this.toError():false;this.accepted=202==status;this.noContent=204==status;this.badRequest=400==status;this.unauthorized=401==status;this.notAcceptable=406==status;this.notFound=404==status;this.forbidden=403==status};Response.prototype.toError=function(){var req=this.req;var method=req.method;var url=req.url;var msg="cannot "+method+" "+url+" ("+this.status+")";var err=new Error(msg);err.status=this.status;err.method=method;err.url=url;return err};request.Response=Response;function Request(method,url){var self=this;Emitter.call(this);this._query=this._query||[];this.method=method;this.url=url;this.header={};this._header={};this.on("end",function(){var err=null;var res=null;try{res=new Response(self)}catch(e){err=new Error("Parser is unable to parse the response");err.parse=true;err.original=e;return self.callback(err)}self.emit("response",res);if(err){return self.callback(err,res)}if(res.status>=200&&res.status<300){return self.callback(err,res)}var new_err=new Error(res.statusText||"Unsuccessful HTTP response");new_err.original=err;new_err.response=res;new_err.status=res.status;self.callback(new_err,res)})}Emitter(Request.prototype);Request.prototype.use=function(fn){fn(this);return this};Request.prototype.timeout=function(ms){this._timeout=ms;return this};Request.prototype.clearTimeout=function(){this._timeout=0;clearTimeout(this._timer);return this};Request.prototype.abort=function(){if(this.aborted)return;this.aborted=true;this.xhr.abort();this.clearTimeout();this.emit("abort");return this};Request.prototype.set=function(field,val){if(isObject(field)){for(var key in field){this.set(key,field[key])}return this}this._header[field.toLowerCase()]=val;this.header[field]=val;return this};Request.prototype.unset=function(field){delete this._header[field.toLowerCase()];delete this.header[field];return this};Request.prototype.getHeader=function(field){return this._header[field.toLowerCase()]};Request.prototype.type=function(type){this.set("Content-Type",request.types[type]||type);return this};Request.prototype.parse=function(fn){this._parser=fn;return this};Request.prototype.accept=function(type){this.set("Accept",request.types[type]||type);return this};Request.prototype.auth=function(user,pass){var str=btoa(user+":"+pass);this.set("Authorization","Basic "+str);return this};Request.prototype.query=function(val){if("string"!=typeof val)val=serialize(val);if(val)this._query.push(val);return this};Request.prototype.field=function(name,val){if(!this._formData)this._formData=new root.FormData;this._formData.append(name,val);return this};Request.prototype.attach=function(field,file,filename){if(!this._formData)this._formData=new root.FormData;this._formData.append(field,file,filename);return this};Request.prototype.send=function(data){var obj=isObject(data);var type=this.getHeader("Content-Type");if(obj&&isObject(this._data)){for(var key in data){this._data[key]=data[key]}}else if("string"==typeof data){if(!type)this.type("form");type=this.getHeader("Content-Type");if("application/x-www-form-urlencoded"==type){this._data=this._data?this._data+"&"+data:data}else{this._data=(this._data||"")+data}}else{this._data=data}if(!obj||isHost(data))return this;if(!type)this.type("json");return this};Request.prototype.callback=function(err,res){var fn=this._callback;this.clearTimeout();fn(err,res)};Request.prototype.crossDomainError=function(){var err=new Error("Origin is not allowed by Access-Control-Allow-Origin");err.crossDomain=true;this.callback(err)};Request.prototype.timeoutError=function(){var timeout=this._timeout;var err=new Error("timeout of "+timeout+"ms exceeded");err.timeout=timeout;this.callback(err)};Request.prototype.withCredentials=function(){this._withCredentials=true;return this};Request.prototype.end=function(fn){var self=this;var xhr=this.xhr=request.getXHR();var query=this._query.join("&");var timeout=this._timeout;var data=this._formData||this._data;this._callback=fn||noop;xhr.onreadystatechange=function(){if(4!=xhr.readyState)return;var status;try{status=xhr.status}catch(e){status=0}if(0==status){if(self.timedout)return self.timeoutError();if(self.aborted)return;return self.crossDomainError()}self.emit("end")};var handleProgress=function handleProgress(e){if(e.total>0){e.percent=e.loaded/e.total*100}self.emit("progress",e)};if(this.hasListeners("progress")){xhr.onprogress=handleProgress}try{if(xhr.upload&&this.hasListeners("progress")){xhr.upload.onprogress=handleProgress}}catch(e){}if(timeout&&!this._timer){this._timer=setTimeout(function(){self.timedout=true;self.abort()},timeout)}if(query){query=request.serializeObject(query);this.url+=~this.url.indexOf("?")?"&"+query:"?"+query}xhr.open(this.method,this.url,true);if(this._withCredentials)xhr.withCredentials=true;if("GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof data&&!isHost(data)){var contentType=this.getHeader("Content-Type");var serialize=this._parser||request.serialize[contentType?contentType.split(";")[0]:""];if(serialize)data=serialize(data)}for(var field in this.header){if(null==this.header[field])continue;xhr.setRequestHeader(field,this.header[field])}this.emit("request",this);xhr.send(typeof data!=="undefined"?data:null);return this};Request.prototype.then=function(fulfill,reject){return this.end(function(err,res){err?reject(err):fulfill(res)})};request.Request=Request;function request(method,url){if("function"==typeof url){return new Request("GET",method).end(url)}if(1==arguments.length){return new Request("GET",method)}return new Request(method,url)}request.get=function(url,data,fn){var req=request("GET",url);if("function"==typeof data)fn=data,data=null;if(data)req.query(data);if(fn)req.end(fn);return req};request.head=function(url,data,fn){var req=request("HEAD",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};function del(url,fn){var req=request("DELETE",url);if(fn)req.end(fn);return req}request.del=del;request.delete=del;request.patch=function(url,data,fn){var req=request("PATCH",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};request.post=function(url,data,fn){var req=request("POST",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};request.put=function(url,data,fn){var req=request("PUT",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};module.exports=request},{emitter:9,reduce:10}],13:[function(require,module,exports){!function(e,t){"object"==(typeof exports==="undefined"?"undefined":_typeof(exports))&&"object"==(typeof module==="undefined"?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==(typeof exports==="undefined"?"undefined":_typeof(exports))?exports.theaterJS=t():e.theaterJS=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}return Array.from(e)}function u(){function e(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=i["default"](e,t,n);return A.casting[r.name]=r,this}function t(e){return A.onStage=e,this}function n(){return A.casting[A.onStage]||null}function r(){var e=this,t=l["default"].toArray(arguments);return t.forEach(function(t){if(f["default"].isString(t)){var n=t.split(":"),a=void 0;n.length>1&&"\\"!==n[0].charAt(n[0].length-1)&&(a=n.shift(),A.options.erase&&r({name:"erase",actor:a}));var u=n.join(":").replace(/\\:/g,":"),o={name:"type",args:[u]};null!=a&&(o.actor=a),r(o)}else f["default"].isFunction(t)?r({name:"callback",args:[t]}):f["default"].isNumber(t)?r(t>0?{name:"wait",args:[t]}:{name:"erase",args:[t]}):f["default"].isArray(t)?t.forEach(function(e){r(e)}):f["default"].isObject(t)&&(f["default"].isArray(t.args)||(t.args=[]),t.args.unshift(c.bind(e)),A.scenario.push(t))}),A.options.autoplay&&u(),this}function u(){return"ready"===A.status&&(A.status="playing",c()),this}function o(e){return("ready"===A.status||f["default"].isFunction(e))&&(A.currentScene=-1,"ready"===A.status?u():e()),this}function s(){return A.status="ready",this}function c(){if("playing"!==A.status)return this;var e=A.scenario[A.currentScene];if(null!=e&&x(e.name+":end",e),A.currentScene+1>=A.scenario.length)return A.status="ready",this;var n=A.scenario[++A.currentScene];switch(n.actor&&t(n.actor),x(n.name+":start",n),n.name){case"type":d.apply(void 0,a(n.args));break;case"erase":g.apply(void 0,a(n.args));break;case"callback":y.apply(void 0,a(n.args));break;case"wait":b.apply(void 0,a(n.args));break;default:console.debug("No scene handler for "+n.name)}return this}function d(e,t){var r=n(),a=A.options.locale,u=A.options.minSpeed,o=A.options.maxSpeed,i=r.displayValue,s=-1,l=!1,c=null,f=null,d=h["default"].map(t);return t=h["default"].strip(t),function g(){var n=h["default"].strip(r.displayValue.substr(i.length));if(n===t)return e();var m=t.substr(0,s+1),v=n!==m,y=r.shouldBeMistaken(n,t,c,f),b=l||!y;if(v&&b)l=!0,c=null,r.displayValue=i+h["default"].inject(n.substr(0,n.length-1),d),s--,f=s;else{l=!1;var j=t.charAt(++s);y&&(j=p["default"].randomCharNear(j,a),null==c&&(c=s)),r.displayValue=i+h["default"].inject(n+j,d)}return setTimeout(g,r.getTypingSpeed(u,o))}(),this}function g(e,t){var r=n(),a=A.options.minSpeed,u=A.options.maxSpeed,o=r.displayValue,i=h["default"].map(o);o=h["default"].strip(o);var s=o.length,l=void 0,c=0;return f["default"].isNumber(t)&&(t>0?l=t:c=o.length+t),function d(){return s===c?e():(r.displayValue=h["default"].inject(o.substr(0,--s),i),setTimeout(d,l||r.getTypingSpeed(a,u)))}(),this}function y(e,t){return t.call(this,e),this}function b(e,t){return setTimeout(e.bind(this),t),this}function j(e,t){return e.split(",").forEach(function(e){e=e.trim(),f["default"].isArray(A.events[e])||(A.events[e]=[]),A.events[e].push(t)}),this}function x(e){var t=arguments;return f["default"].isArray(A.events[e])&&!function(){var n=[].slice.call(t,1);n.unshift(e);var r=(A.events[e]||[]).concat(A.events["*"]||[]);r.forEach(function(e){e.apply(void 0,a(n))})}(),this}var S=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];S=l["default"].merge({},m,S),"detect"===S.locale&&null!=v&&null!=v.navigator&&f["default"].isArray(v.navigator.languages)&&f["default"].isString(v.navigator.languages[0])&&(S.locale=v.navigator.languages[0].substr(0,2)),p["default"].supports(S.locale)||(S.locale=p["default"].defaultLocale);var A={options:S,casting:{},status:"ready",onStage:null,currentScene:-1,scenario:[],events:{}};return t(null),Object.freeze(Object.defineProperties({addActor:e,getCurrentActor:n,addScene:r,play:u,replay:o,stop:s,on:j},{options:{get:function get(){return A.options},configurable:!0,enumerable:!0},status:{get:function get(){return A.status},configurable:!0,enumerable:!0}}))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o),s=n(3),l=r(s),c=n(2),f=r(c),d=n(4),p=r(d),g=n(6),h=r(g),m={autoplay:!0,erase:!0,minSpeed:80,maxSpeed:450,locale:"detect"},v=(1,eval)("this");u.init=function(){var e=arguments.length<=0||void 0===arguments[0]?"actor":arguments[0],t=u();return t.addActor(e,{accuracy:1,speed:.8}),t},t["default"]=u,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),u=r(a),o=n(3),i=r(o),s={speed:.6,accuracy:.6},l=(1,eval)("this");t["default"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r="",a=void 0;if(u["default"].isNumber(t)&&(t={speed:t,accuracy:t}),t=i["default"].merge({},s,t),null!=l&&null!=l.document&&(null==n&&(n="#"+e),u["default"].isString(n))){var o=n,c=l.document.querySelector(o);if(null==c)throw new Error("no matches for "+e+"'s selector: "+o);a=c,n=function(e){a.innerHTML=e}}return u["default"].isFunction(n)||(n=console.log.bind(console)),Object.defineProperties({$element:a,getTypingSpeed:function getTypingSpeed(e,n){var r=i["default"].randomFloat(t.speed,1);return i["default"].getPercentageOf(n,e,r)},shouldBeMistaken:function shouldBeMistaken(e,n){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],a=arguments.length<=3||void 0===arguments[3]?null:arguments[3],o=10*t.accuracy;if(o>=8)return!1;if(e.length<=o)return!1;if(e.length===n.length)return!1;if(u["default"].isNumber(r)){var s=e.length-r,l=o>=6?10-o:4;if(s>=l)return!1}if(u["default"].isNumber(a)){var s=e.length-a,c=2*Math.max(o,2);if(c>=s)return!1}return i["default"].randomFloat(0,.8)>t.accuracy}},{displayValue:{get:function get(){return r},set:function set(e){r=e,n(e)},configurable:!0,enumerable:!0},name:{get:function get(){return e},configurable:!0,enumerable:!0}})},e.exports=t["default"]},function(e,t){"use strict";function n(e){return{}.toString.call(e)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={isNumber:function isNumber(e){return"number"==typeof e},isString:function isString(e){return"[object String]"===n(e)},isObject:function isObject(e){return"[object Object]"===n(e)},isArray:function isArray(e){return"[object Array]"===n(e)},isFunction:function isFunction(e){return"function"==typeof e}},e.exports=t["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={toArray:function toArray(e){return[].slice.call(e)},merge:function merge(e){for(var t=[].slice.call(arguments,1),n=0,r=t.length;r>n;n++){var a=t[n];for(var u in a){a.hasOwnProperty(u)&&(e[u]=a[u])}}return e},random:function random(e,t){return Math.floor(Math.random()*(t-e+1))+e},randomFloat:function randomFloat(e,t){return Math.random()*(t-e)+e},getPercentageOf:function getPercentageOf(e,t,n){return e-e*n+t*n}},e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){for(var t={},n=0,r=e.length,a=void 0;r>n;n++){a=e[n];for(var u=0,o=a.length;o>u;u++){t[a[u]]={x:u,y:n}}}return t}Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),o=r(u),i=n(3),s=r(i),l=n(5),c=r(l),f="en";for(var d in c["default"]){if(c["default"].hasOwnProperty(d)){var p=c["default"][d];c["default"][d]={list:p,mapped:a(p)}}}t["default"]={defaultLocale:f,supports:function supports(e){return o["default"].isObject(c["default"][e])},randomCharNear:function randomCharNear(e,t){if(!this.supports(t))throw new Error('locale "'+t+'" is not supported');var n=c["default"][t].mapped,r=1,a=[],u=/[A-Z]/.test(e);e=e.toLowerCase();var o=n[e]||[],i=void 0;for(var l in n){n.hasOwnProperty(l)&&l!==e&&(i=n[l],Math.abs(o.x-i.x)<=r&&Math.abs(o.y-i.y)<=r&&a.push(l))}var f=a.length>0?a[s["default"].random(0,a.length-1)]:this.randomChar(t);return u&&(f=f.toUpperCase()),f},randomChar:function randomChar(e){if(!this.supports(e))throw new Error('locale "'+e+'" is not supported');var t=c["default"][e].list.join("");return t.charAt(s["default"].random(0,t.length-1))}},e.exports=t["default"]},function(e,t){e.exports={en:["qwertyuiop","asdfghjkl","zxcvbnm"],fr:["azertyuiop","qsdfghjklm","wxcvbn"],da:["qwertyuiop","asdfghjkl","zxcvbnm"],de:["qwertzuiop","asdfghjkl","yxcvbnm"],pl:["qwertyuiop","asdfghjkl","zxcvbnm"],pt:["qwertyuiop","asdfghjkl","zxcvbnm"],ru:["","",""]}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={strip:function strip(e){return e.replace(/(<([^>]+)>)/gi,"")},map:function map(e){for(var t=/<[^>]+>/gi,n=[],r=[],a=void 0,u=void 0;a=t.exec(e);){u={tagName:a[0],position:a.index},"/"===u.tagName.charAt(1)?u.opener=r.pop():"/"!==u.tagName.charAt(u.tagName.length-2)&&r.push(u),n.push(u)}return n},inject:function inject(e,t){for(var n=0,r=void 0;n<t.length;n++){r=t[n],e.length>0&&r.position<=e.length?e=e.substr(0,r.position)+r.tagName+e.substr(r.position):r.opener&&r.opener.position<e.length&&(e+=r.tagName)}return e}},e.exports=t["default"]}])})},{}],14:[function(require,module,exports){module.exports=require("./dist/theater.min.js")},{"./dist/theater.min.js":13}]},{},[1]);
